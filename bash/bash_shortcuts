# Bash shortcuts
function sbash() {
    if [ "$(uname)" == "Darwin" ]; then
        source ~/.bash_profile;
        echo 'bash_profile reloaded!'
    elif [ "$(uname)" == "Linux" ]; then
        source ~/.bashrc;
        echo 'bashrc reloaded!'
    fi
}

function remove_pyc() {
    find . -name "*.pyc" -exec rm -rf {} \;
}

function diffs() {
    vim `git ls-files -m` -p;
}

function install_neovim() {
    if [ "$(uname)" == "Darwin" ]; then
        brew tap neovim/neovim
        brew install --HEAD neovim
    elif [ "$(uname)" == "Linux" ]; then
        sudo add-apt-repository ppa:neovim-ppa/unstable
        sudo apt-get update
        sudo apt-get install neovim
    fi
}

# Tmux shortcut
function tm() {
    tmux ls;
    if [ -z "$1" ]; then
        tmux attach || tmux new -s 'unnamed';
    else
        tmux attach || tmux new -s $1;
    fi
}
function tnew {
    tmux new-session -As `basename $PWD`
}


# Pandoc shortcuts
function md_to_pdf() {
    pandoc -V geometry:margin="$1"cm -o $3 $2
}
function md_to_wiki() {
    pandoc -r markdown $1 -t mediawiki -o $2
}

# Python shortcuts
alias pi='THEANO_FLAGS="device=cpu" ipython -i'
alias py='THEANO_FLAGS="device=cpu" ipython -i'
alias gpy='THEANO_FLAGS="device=gpu0" ipython -i'
alias gpy0='THEANO_FLAGS="device=gpu0" ipython -i'
alias gpy1='THEANO_FLAGS="device=gpu1" ipython -i'
alias gpy2='THEANO_FLAGS="device=gpu2" ipython -i'
alias gpy3='THEANO_FLAGS="device=gpu3" ipython -i'

# Git shortcuts
function fastpush() {
    git add -u;
    git commit -m "$*";
    git push;
}
function gsu() {
    git submodule init;
    git submodule update;
}


function echo_and_pull() {
    printf 'Pulling the repository %s...\n' "${PWD##*/}";
    git pull;
}
function update_dots() {
    cd ~/dotfiles_akk && echo_and_pull;
    git submodule init;
    git submodule update;
    nvim +PlugInstall +qall
}
function gpe() {
    cwd=$(pwd);
    cd ~/applied_modelling && echo_and_pull;
    cd ~/hrvalue && echo_and_pull;
    cd $cwd;
}
function gpa() {
    cwd=$(pwd)
    update_dots;
    cd ~/applied_modelling && echo_and_pull;
    cd ~/hrvalue && echo_and_pull;
    cd ~/wiki && echo_and_pull;
    cd ~/tfnets && echo_and_pull;
    cd $cwd;
}
function clone_dotfiles() {
    git clone git@github.com:anthony-khong/dotfiles_akk.git;
    cd dotfiles_akk;
    git submodule init;
    git submodule update;

    cd;
    if [ "$(uname)" == "Darwin" ]; then
        rm .bash_profile;
        ln -s dotfiles_akk/bash/bash_profile .bash_profile;
    elif [ "$(uname)" == "Linux" ]; then
        rm .bashrc
        ln -s dotfiles_akk/bash/bashrc .bashrc;
    fi

    cd;
    rm .vimrc;
    rm -rf .vim;
    ln -s ~/dotfiles_akk/vim/vimrc .vimrc
    ln -s ~/dotfiles_akk/vim/ .vim;

    mkdir -p ${XDG_CONFIG_HOME:=$HOME/.config}
    ln -s ~/dotfiles_akk/vim $XDG_CONFIG_HOME/nvim

    rm .tmux.conf;
    ln -s ~/dotfiles_akk/tmux/tmux.conf .tmux.conf;

    nvim +PlugInstall +qall
    nvim +PlugUpdate +qall
    nvim +PlugInstall +qall
}
function fix_nvim_tmux_navigator () {
    infocmp $TERM | sed 's/kbs=^[hH]/kbs=\\177/' > $TERM.ti
    tic $TERM.ti
}

# Navigation shortcuts
function dropbox_hr_value() {
    cd ~/Dropbox/am_records/hr_value
}
function gpy() {
    cd ~/Dropbox/tutorials/gpy
}
function papers() {
    cd ~/Dropbox/Interesting\ Papers/
}
function bayes_ml() {
    cd ~/Dropbox/Interesting\ Papers/Bayesian\ Machine\ Learning/
}
function deep() {
    cd ~/Dropbox/Interesting\ Papers/Deep\ Learning/
}
function ensembles() {
    cd ~/Dropbox/Interesting\ Papers/Ensemble\ Methods/
}
function mcm() {
    cd ~/Dropbox/Interesting\ Papers/Monte\ Carlo\ Methods/
}

function am() {
    cd ~/applied_modelling/
}
function fv() {
    cd ~/applied_modelling/football_value/
}
function hrv() {
    cd ~/hrvalue/
}
function dots() {
    cd ~/dotfiles_akk/
}

# Networking shortcuts
function jarwin() {
    ssh -4 -X akkhong@jarwinjkt.no-ip.biz
}
function cuffy() {
    ssh -4 -X akk@ilikezcoffe.no-ip.biz
}
function servox() {
    ssh -p2222 -X akkhong@servox.no-ip.biz
}

function local_jarwin() {
    ssh -X akkhong@192.168.1.107
}
function bealach() {
    ssh -X akkhong@192.168.1.110
}
function samhan() {
    ssh -X akkhong@192.168.1.109
}
function stream_webcam() {
    vlc v4l2:///dev/video0
}
function flush_dns_cache() {
    sudo dscacheutil -flushcache
    sudo killall -HUP mDNSResponder
    say cache flushed
}
function check_my_ip() {
    curl -s checkip.dyndns.org | sed -e 's/.*Current IP Address: //' -e 's/<.*$//'
}

# Vim shortcuts
alias vi="/usr/bin/vim -p"
alias vim="nvim -p"
alias vff="nvim +'FZF ~'"
